{% extends "base.html" %}
{% block title %}
  {{ post.title }} | {% if post.location and post.location.is_published %}{{ post.location.name }}{% else %}Планета Земля{% endif %} |
  {{ post.pub_date|date:"d E Y" }}
{% endblock %}

{% block content %}
  <section style="max-width: 640px; margin: 0 auto;">
    <article class="post-card">
      {% if post.image %}
        <a href="{{ post.image.url }}" target="_blank" style="display: block; margin-bottom: 1rem;">
          <img src="{{ post.image.url }}" alt="{{ post.title }}" style="max-width: 100%; border: 2px solid var(--pink); border-radius: 8px; display: block; margin-left: auto; margin-right: auto;">
        </a>
      {% endif %}

      <h2 class="post-title">{{ post.title }}</h2>

      <div style="color: var(--pink); font-size: 0.9rem; margin-bottom: 1rem;">
        {% if not post.is_published %}
          <p style="color: var(--pink); font-weight: 600;">Пост снят с публикации админом</p>
        {% elif not post.category.is_published %}
          <p style="color: var(--pink); font-weight: 600;">Выбранная категория снята с публикации админом</p>
        {% endif %}

        {{ post.pub_date|date:"d E Y, H:i" }} | {% if post.location and post.location.is_published %}{{ post.location.name }}{% else %}Планета Земля{% endif %}<br>
        От автора <a href="{% url 'blog:profile' post.author.username %}" style="color: var(--pink); text-decoration: none;">@{{ post.author.username }}</a> в категории {% include "includes/category_link.html" %}
      </div>

      <p style="white-space: pre-wrap; margin-bottom: 1.5rem;">{{ post.text|linebreaksbr }}</p>

      {% if user == post.author %}
        <div style="margin-bottom: 1rem; display: flex; gap: 1rem; justify-content: center;">
          <a href="{% url 'blog:edit_post' post.id %}" class="read-more" style="padding: 0.3rem 0.8rem; font-size: 0.9rem;">Отредактировать</a>
          <a href="{% url 'blog:delete_post' post.id %}" class="read-more" style="padding: 0.3rem 0.8rem; font-size: 0.9rem;">Удалить</a>
        </div>
      {% endif %}

      {% include "includes/comments.html" %}
    </article>
  </section>
{% endblock %}
